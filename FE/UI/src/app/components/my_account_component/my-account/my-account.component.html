<!-- UI\src\app\components\my_account_component\my-account\my-account.component.html -->
<div class="my-account">
  <div class="icon">
    <fa-icon [icon]="faUser"></fa-icon>
  </div>
  <h2>My Account</h2>

  <form [formGroup]="myAccountForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label>Username</label>
      <input
        formControlName="username"
        type="text"
        placeholder="Enter new username (optional)"
      />
    </div>

    <div class="form-group">
      <label>Email</label>
      <input
        formControlName="email"
        type="email"
        placeholder="Enter new email (optional)"
      />
      @if (myAccountForm.get("email")?.errors?.["email"]) {
        <span class="error-text">Please enter a valid email address</span>
      }
    </div>

    <div class="form-group">
      <label>Shop Address</label>
      <input
        formControlName="shopAddress"
        type="text"
        placeholder="Enter new shop address (optional)"
      />
    </div>

    <div class="form-group">
      <label>Current Password <span class="required">*</span></label>
      <input
        formControlName="currentPassword"
        type="password"
        placeholder="Enter your current password"
      />
      @if (myAccountForm.get("currentPassword")?.errors?.["required"] && myAccountForm.get("currentPassword")?.touched) {
        <span class="error-text">Password is required</span>
      }
    </div>

    <button type="submit" [disabled]="myAccountForm.invalid">Update Account</button>
  </form>

  @if (errorMessage) {
    <p class="error-message">{{ errorMessage }}</p>
  }

  <a (click)="onChangePassword()" class="change-password-link">Change password</a>
</div>
